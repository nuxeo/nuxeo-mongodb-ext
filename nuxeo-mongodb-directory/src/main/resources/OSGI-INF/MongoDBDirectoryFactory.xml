<?xml version="1.0"?>
<component name="org.nuxeo.directory.mongodb.MongoDBDirectoryFactory">

    <implementation class="org.nuxeo.directory.mongodb.MongoDBDirectoryFactory" />

    <require>org.nuxeo.ecm.directory.DirectoryServiceImpl</require>

    <documentation>
        MongoDB-based implementation for NXDirectory
    </documentation>

    <extension-point name="directories">
        <documentation>
            This extension point can be used to register new MongoDB-based
            directories. The
            extension can contain any number of directories
            declarations of the form:
            <code>
                <directory name="userDirectory">
                    <schema>vocabulary</schema>
                    <types>
                        <type>system</type>
                    </types>
                    <serverUrl>mongodb://localhost:27017</serverUrl>
                    <databaseName>nuxeo</databaseName>
                    <nativeCase>false</nativeCase>
                    <idField>username</idField>
                    <passwordField>password</passwordField>
                    <passwordHashAlgorithm>SSHA</passwordHashAlgorithm>
                    <autoincrementIdField>false</autoincrementIdField>
                    <createTablePolicy>on_missing_columns</createTablePolicy>
                    <dataFile>setup.csv</dataFile>
                    <dataFileCharacterSeparator>,</dataFileCharacterSeparator>
                    <permissions>
                        <permission name="Read">
                            <group>mygroup</group>
                            <group>mygroup2</group>
                            <user>Administrator</user>
                        </permission>
                        <permission name="Write">
                            <group>mygroup3</group>
                        </permission>
                    </permissions>
                </directory>
            </code>
        </documentation>

        <object class="org.nuxeo.directory.mongodb.MongoDBDirectoryDescriptor" />
    </extension-point>

</component>
